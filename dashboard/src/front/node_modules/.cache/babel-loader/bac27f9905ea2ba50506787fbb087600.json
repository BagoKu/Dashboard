{"ast":null,"code":"import axios from 'axios';\nimport Cookies from \"js-cookie\";\n\nvar https = require('http');\n\nvar request = require('request');\n\nvar port = 8800;\n\nasync function addUser(_username, _email, _password) {\n  const data = JSON.stringify({\n    name: _username,\n    email: _email,\n    password: _password,\n    dashboards: {\n      name: \"Home\"\n    }\n  });\n  const options = {\n    hostname: 'localhost',\n    port: port,\n    path: '/',\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Content-Length': data.length\n    }\n  };\n  const req = https.request(options, res => {\n    console.log(\"statusCode: \".concat(res.statusCode));\n    res.on('data', d => {\n      process.stdout.write(d);\n    });\n  });\n  req.on('error', error => {\n    console.error(error);\n  });\n  req.write(data);\n  req.end();\n  Cookies.set('_password', _password);\n  Cookies.set('_email', _email);\n}\n\nfunction addWidget(_email, _dashboard, _widgetName, _widgetType) {\n  const data = JSON.stringify({\n    email: _email,\n    dashName: _dashboard,\n    widgets: {\n      name: _widgetName,\n      type: _widgetType\n    }\n  });\n  const options = {\n    hostname: 'localhost',\n    port: port,\n    path: '/',\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Content-Length': data.length\n    }\n  };\n  console.log(_email);\n  console.log('aled');\n  const req = https.request(options, res => {\n    console.log(\"statusCode: \".concat(res.statusCode));\n    res.on('data', d => {\n      process.stdout.write(d);\n    });\n  });\n  req.on('error', error => {\n    console.error(error);\n  });\n  req.write(data);\n  req.end();\n}\n\nfunction addDashboard(_email, _dashboardName, _icon) {\n  const data = JSON.stringify({\n    email: _email,\n    dashboards: {\n      name: _dashboardName //icon: _icon\n\n    }\n  });\n  const options = {\n    hostname: 'localhost',\n    port: port,\n    path: '/',\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Content-Length': data.length\n    }\n  };\n  console.log(_email);\n  console.log('aled');\n  const req = https.request(options, res => {\n    console.log(\"statusCode: \".concat(res.statusCode));\n    res.on('data', d => {\n      process.stdout.write(d);\n    });\n  });\n  req.on('error', error => {\n    console.error(error);\n  });\n  req.write(data);\n  req.end();\n}\n\nasync function findUser(_email, _password) {\n  console.log(\"test2\");\n  const response = await axios.get(\"http://localhost:\" + port).then(res => {\n    console.log(\"test\");\n\n    for (var i = 0; res.data[i] != null; i++) {\n      if (_email === res.data[i].email && _password === res.data[i].password) {\n        console.log(\"ok\");\n        console.log(res.data[i].name);\n        return res.data[i].email;\n      } else console.log(\"ko\");\n    }\n\n    return \"ko\";\n  }).catch(error => console.log(error));\n  return response;\n}\n\nconst user = {\n  addUser,\n  findUser,\n  addDashboard,\n  addWidget\n};\nexport default user;","map":{"version":3,"sources":["/front/src/ConnectToApi.js"],"names":["axios","Cookies","https","require","request","port","addUser","_username","_email","_password","data","JSON","stringify","name","email","password","dashboards","options","hostname","path","method","headers","length","req","res","console","log","statusCode","on","d","process","stdout","write","error","end","set","addWidget","_dashboard","_widgetName","_widgetType","dashName","widgets","type","addDashboard","_dashboardName","_icon","findUser","response","get","then","i","catch","user"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AACA,IAAIC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AAGA,IAAIE,IAAI,GAAG,IAAX;;AAEA,eAAeC,OAAf,CAAuBC,SAAvB,EAAkCC,MAAlC,EAA0CC,SAA1C,EAAqD;AACjD,QAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AACxBC,IAAAA,IAAI,EAAEN,SADkB;AAExBO,IAAAA,KAAK,EAAEN,MAFiB;AAGxBO,IAAAA,QAAQ,EAAEN,SAHc;AAIxBO,IAAAA,UAAU,EAAE;AACRH,MAAAA,IAAI,EAAE;AADE;AAJY,GAAf,CAAb;AASA,QAAMI,OAAO,GAAG;AACZC,IAAAA,QAAQ,EAAE,WADE;AAEZb,IAAAA,IAAI,EAAEA,IAFM;AAGZc,IAAAA,IAAI,EAAE,GAHM;AAIZC,IAAAA,MAAM,EAAE,MAJI;AAKZC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,wBAAkBX,IAAI,CAACY;AAFlB;AALG,GAAhB;AAWA,QAAMC,GAAG,GAAGrB,KAAK,CAACE,OAAN,CAAca,OAAd,EAAwBO,GAAD,IAAS;AACxCC,IAAAA,OAAO,CAACC,GAAR,uBAA2BF,GAAG,CAACG,UAA/B;AAEAH,IAAAA,GAAG,CAACI,EAAJ,CAAO,MAAP,EAAgBC,CAAD,IAAO;AAClBC,MAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBH,CAArB;AACH,KAFD;AAGH,GANW,CAAZ;AAQAN,EAAAA,GAAG,CAACK,EAAJ,CAAO,OAAP,EAAiBK,KAAD,IAAW;AACvBR,IAAAA,OAAO,CAACQ,KAAR,CAAcA,KAAd;AACH,GAFD;AAIAV,EAAAA,GAAG,CAACS,KAAJ,CAAUtB,IAAV;AACAa,EAAAA,GAAG,CAACW,GAAJ;AAEAjC,EAAAA,OAAO,CAACkC,GAAR,CAAY,WAAZ,EAAyB1B,SAAzB;AACAR,EAAAA,OAAO,CAACkC,GAAR,CAAY,QAAZ,EAAsB3B,MAAtB;AAEH;;AAED,SAAS4B,SAAT,CAAmB5B,MAAnB,EAA2B6B,UAA3B,EAAuCC,WAAvC,EAAoDC,WAApD,EAAiE;AAC7D,QAAM7B,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AACxBE,IAAAA,KAAK,EAAEN,MADiB;AAExBgC,IAAAA,QAAQ,EAAEH,UAFc;AAGxBI,IAAAA,OAAO,EAAE;AACL5B,MAAAA,IAAI,EAAEyB,WADD;AAELI,MAAAA,IAAI,EAAEH;AAFD;AAHe,GAAf,CAAb;AASA,QAAMtB,OAAO,GAAG;AACZC,IAAAA,QAAQ,EAAE,WADE;AAEZb,IAAAA,IAAI,EAAEA,IAFM;AAGZc,IAAAA,IAAI,EAAE,GAHM;AAIZC,IAAAA,MAAM,EAAE,KAJI;AAKZC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,wBAAkBX,IAAI,CAACY;AAFlB;AALG,GAAhB;AAWAG,EAAAA,OAAO,CAACC,GAAR,CAAYlB,MAAZ;AACAiB,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAEA,QAAMH,GAAG,GAAGrB,KAAK,CAACE,OAAN,CAAca,OAAd,EAAwBO,GAAD,IAAS;AACxCC,IAAAA,OAAO,CAACC,GAAR,uBAA2BF,GAAG,CAACG,UAA/B;AAEAH,IAAAA,GAAG,CAACI,EAAJ,CAAO,MAAP,EAAgBC,CAAD,IAAO;AAClBC,MAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBH,CAArB;AACH,KAFD;AAGH,GANW,CAAZ;AAQAN,EAAAA,GAAG,CAACK,EAAJ,CAAO,OAAP,EAAiBK,KAAD,IAAW;AACvBR,IAAAA,OAAO,CAACQ,KAAR,CAAcA,KAAd;AACH,GAFD;AAIAV,EAAAA,GAAG,CAACS,KAAJ,CAAUtB,IAAV;AACAa,EAAAA,GAAG,CAACW,GAAJ;AACH;;AAED,SAASS,YAAT,CAAsBnC,MAAtB,EAA8BoC,cAA9B,EAA8CC,KAA9C,EAAqD;AAEjD,QAAMnC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AACxBE,IAAAA,KAAK,EAAEN,MADiB;AAExBQ,IAAAA,UAAU,EAAE;AACRH,MAAAA,IAAI,EAAE+B,cADE,CAER;;AAFQ;AAFY,GAAf,CAAb;AAQA,QAAM3B,OAAO,GAAG;AACZC,IAAAA,QAAQ,EAAE,WADE;AAEZb,IAAAA,IAAI,EAAEA,IAFM;AAGZc,IAAAA,IAAI,EAAE,GAHM;AAIZC,IAAAA,MAAM,EAAE,KAJI;AAKZC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,wBAAkBX,IAAI,CAACY;AAFlB;AALG,GAAhB;AAWAG,EAAAA,OAAO,CAACC,GAAR,CAAYlB,MAAZ;AACAiB,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAEA,QAAMH,GAAG,GAAGrB,KAAK,CAACE,OAAN,CAAca,OAAd,EAAwBO,GAAD,IAAS;AACxCC,IAAAA,OAAO,CAACC,GAAR,uBAA2BF,GAAG,CAACG,UAA/B;AAEAH,IAAAA,GAAG,CAACI,EAAJ,CAAO,MAAP,EAAgBC,CAAD,IAAO;AAClBC,MAAAA,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAqBH,CAArB;AACH,KAFD;AAGH,GANW,CAAZ;AAQAN,EAAAA,GAAG,CAACK,EAAJ,CAAO,OAAP,EAAiBK,KAAD,IAAW;AACvBR,IAAAA,OAAO,CAACQ,KAAR,CAAcA,KAAd;AACH,GAFD;AAIAV,EAAAA,GAAG,CAACS,KAAJ,CAAUtB,IAAV;AACAa,EAAAA,GAAG,CAACW,GAAJ;AACH;;AAED,eAAeY,QAAf,CAAwBtC,MAAxB,EAAgCC,SAAhC,EAA2C;AACvCgB,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,QAAMqB,QAAQ,GAAG,MAAM/C,KAAK,CAACgD,GAAN,CAAU,sBAAsB3C,IAAhC,EAClB4C,IADkB,CACbzB,GAAG,IAAI;AACTC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,SAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgB1B,GAAG,CAACd,IAAJ,CAASwC,CAAT,KAAe,IAA/B,EAAqCA,CAAC,EAAtC,EAA0C;AACtC,UAAI1C,MAAM,KAAKgB,GAAG,CAACd,IAAJ,CAASwC,CAAT,EAAYpC,KAAvB,IAAgCL,SAAS,KAAKe,GAAG,CAACd,IAAJ,CAASwC,CAAT,EAAYnC,QAA9D,EAAwE;AACpEU,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACd,IAAJ,CAASwC,CAAT,EAAYrC,IAAxB;AACA,eAAOW,GAAG,CAACd,IAAJ,CAASwC,CAAT,EAAYpC,KAAnB;AACH,OAJD,MAKIW,OAAO,CAACC,GAAR,CAAY,IAAZ;AACP;;AACD,WAAO,IAAP;AACH,GAZkB,EAalByB,KAbkB,CAaZlB,KAAK,IAAIR,OAAO,CAACC,GAAR,CAAYO,KAAZ,CAbG,CAAvB;AAcA,SAAOc,QAAP;AACH;;AAED,MAAMK,IAAI,GAAG;AACT9C,EAAAA,OADS;AACAwC,EAAAA,QADA;AACUH,EAAAA,YADV;AACwBP,EAAAA;AADxB,CAAb;AAIA,eAAegB,IAAf","sourcesContent":["import axios from 'axios';\nimport Cookies from \"js-cookie\";\nvar https = require('http');\nvar request = require('request');\n\n\nvar port = 8800\n\nasync function addUser(_username, _email, _password) {\n    const data = JSON.stringify({\n        name: _username,\n        email: _email,\n        password: _password,\n        dashboards: {\n            name: \"Home\"\n        }\n    });\n\n    const options = {\n        hostname: 'localhost',\n        port: port,\n        path: '/',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': data.length\n        }\n    }\n\n    const req = https.request(options, (res) => {\n        console.log(`statusCode: ${res.statusCode}`);\n\n        res.on('data', (d) => {\n            process.stdout.write(d)\n        })\n    })\n\n    req.on('error', (error) => {\n        console.error(error)\n    })\n\n    req.write(data)\n    req.end()\n\n    Cookies.set('_password', _password);\n    Cookies.set('_email', _email);\n\n}\n\nfunction addWidget(_email, _dashboard, _widgetName, _widgetType) {\n    const data = JSON.stringify({\n        email: _email,\n        dashName: _dashboard,\n        widgets: {\n            name: _widgetName,\n            type: _widgetType\n        }\n    });\n\n    const options = {\n        hostname: 'localhost',\n        port: port,\n        path: '/',\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': data.length\n        }\n    }\n\n    console.log(_email)\n    console.log('aled')\n\n    const req = https.request(options, (res) => {\n        console.log(`statusCode: ${res.statusCode}`);\n\n        res.on('data', (d) => {\n            process.stdout.write(d)\n        })\n    })\n\n    req.on('error', (error) => {\n        console.error(error)\n    })\n\n    req.write(data)\n    req.end()\n}\n\nfunction addDashboard(_email, _dashboardName, _icon) {\n\n    const data = JSON.stringify({\n        email: _email,\n        dashboards: {\n            name: _dashboardName\n            //icon: _icon\n        }\n    });\n\n    const options = {\n        hostname: 'localhost',\n        port: port,\n        path: '/',\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': data.length\n        }\n    }\n\n    console.log(_email)\n    console.log('aled')\n\n    const req = https.request(options, (res) => {\n        console.log(`statusCode: ${res.statusCode}`);\n\n        res.on('data', (d) => {\n            process.stdout.write(d)\n        })\n    })\n\n    req.on('error', (error) => {\n        console.error(error)\n    })\n\n    req.write(data)\n    req.end()\n}\n\nasync function findUser(_email, _password) {\n    console.log(\"test2\");\n    const response = await axios.get(`http://localhost:` + port)\n        .then(res => {\n            console.log(\"test\");\n            for (var i = 0; res.data[i] != null; i++) {\n                if (_email === res.data[i].email && _password === res.data[i].password) {\n                    console.log(\"ok\");\n                    console.log(res.data[i].name);\n                    return(res.data[i].email);\n                } else\n                    console.log(\"ko\");\n            }\n            return(\"ko\");\n        })\n        .catch(error => console.log(error))\n    return(response);\n}\n\nconst user = {\n    addUser, findUser, addDashboard, addWidget\n}\n\nexport default user;\n"]},"metadata":{},"sourceType":"module"}